#!/bin/bash

output=$(style "$1")
flesch=$(echo "$output" | awk '/Flesch Index/ { split($3, a, "/"); print a[1] }')
echo "ğŸ“Š Flesch score: $flesch"
passive=$(echo "$output" | awk '/passive sentences/ {gsub("%",""); print int($1)}')
# Float comparison using bc
if (( $(echo "$flesch > 64.0" | bc -l) )); then
  echo "âœ… Flesch score is sufficient â€” pass."
else
  echo "âŒ Flesch score too low â€” fail."
  exit 1
fi
if [ "$passive" -gt 19 ]; then
  echo "âŒ Passive usage is $passive% â€” too high."
  exit 1
else
  echo "âœ… Passive usage is $passive%"
fi
